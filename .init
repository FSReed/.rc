#!/usr/bin/bash

if ! [-x git]; then
    echo "You need to install git first"
fi


echo -n "Do you want to generate ssh-key to github now?[Y/n]:"
read -r github_ssh
if [[ -z github_ssh ]]; then
    github_ssh="Y"
fi
if [[ $github_ssh -eq "Y" ]]; then
    echo -n "Your email: (To connect to Github using ssh):"
    read Email
    ssh-keygen -t ed25519 -C $Email
    echo "The public key is:"
    cat ~/.ssh/id_ed25519.pub
    echo "Please make sure to register this ssh key in Github. I'll be waiting :)"
    echo -n "Press Enter if you are ready:"
    read -r nothing
fi

plug_vim_path="~/.vim/autoload/"
sync_script="~/.rc/sync_script"

chmod 700 $sync_script

mkdir -p $plug_vim_path
$sync_script ~/.rc
~/.rc/sync_script ~/.rc
mv ~/plug.vim $plug_vim_path

rm ~/.rc -r
source ~/.bashrc

